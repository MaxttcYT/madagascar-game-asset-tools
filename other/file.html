<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RenderWare Chunk ID Tool</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 800px;
        margin: auto;
    }
    h1, h2 {
        margin-bottom: 10px;
    }
    input {
        width: 260px;
        padding: 5px;
        margin-bottom: 10px;
    }
    table {
        margin-top: 20px;
        border-collapse: collapse;
        width: 100%;
        overflow-x: auto;
        display: block;
    }
    th, td {
        border: 1px solid #ccc;
        padding: 6px 10px;
        text-align: center;
        white-space: nowrap;
    }
    th {
        background: #f0f0f0;
    }
    code {
        font-family: monospace;
    }
    .match {
        background-color: #d4f8d4;
    }
    span.error {
        color: red;
        display: none;
    }
</style>
</head>
<body>

<h1>RenderWare Chunk ID Tool</h1>

<h2>Forward (Chunk → All Vendors)</h2>
<input id="chunk" placeholder="Chunk ID (hex, e.g. 78)">
<span id="chunk-error" class="error">Invalid hex!</span>

<h2>Reverse (Combined → Per Vendor)</h2>
<input id="combined" placeholder="Combined ID (hex, e.g. 12345678)">
<span id="combined-error" class="error">Invalid hex!</span>

<table id="results" style="display:none;">
    <thead>
        <tr>
            <th>Vendor</th>
            <th>Vendor ID</th>
            <th>Chunk ID</th>
            <th>Combined ID</th>
            <th>Combined ID (Decimal)</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
const vendors = [
    { name: "rwVENDORID_CORE",           id: 0x000000 },
    { name: "rwVENDORID_CRITERIONTK",    id: 0x000001 },
    { name: "rwVENDORID_REDLINERACER",   id: 0x000002 },
    { name: "rwVENDORID_CSLRD",          id: 0x000003 },
    { name: "rwVENDORID_CRITERIONINT",   id: 0x000004 },
    { name: "rwVENDORID_CRITERIONWORLD", id: 0x000005 },
    { name: "rwVENDORID_BETA",           id: 0x000006 },
    { name: "rwVENDORID_CRITERIONRM",    id: 0x000007 },
    { name: "rwVENDORID_CRITERIONRWA",   id: 0x000008 },
    { name: "rwVENDORID_CRITERIONRWP",   id: 0x000009 }
];

const chunkInput = document.getElementById("chunk");
const combinedInput = document.getElementById("combined");
const resultsTable = document.getElementById("results");
const tbody = resultsTable.querySelector("tbody");

function showTable() {
    resultsTable.style.display = "table";
}

function hideTable() {
    resultsTable.style.display = "none";
}

function generateForward(chunkValue) {
    tbody.innerHTML = "";
    vendors.forEach(v => {
        const combined = ((v.id & 0xFFFFFF) << 8) | chunkValue;
        tbody.innerHTML += `
            <tr>
                <td>${v.name}</td>
                <td><code>0x${v.id.toString(16).padStart(6,"0")}</code></td>
                <td><code>0x${chunkValue.toString(16).padStart(2,"0")}</code></td>
                <td><code>0x${combined.toString(16).padStart(8,"0")}</code></td>
                <td><code>${combined}</code></td>
            </tr>
        `;
    });
    showTable();
}

function generateReverse(combinedValue) {
    tbody.innerHTML = "";
    const vendorPart = (combinedValue >> 8) & 0xFFFFFF;
    const chunkPart = combinedValue & 0xFF;

    vendors.forEach(v => {
        const isMatch = v.id === vendorPart;
        tbody.innerHTML += `
            <tr class="${isMatch ? 'match' : ''}">
                <td>${v.name}</td>
                <td><code>0x${v.id.toString(16).padStart(6,"0")}</code></td>
                <td><code>${isMatch ? '0x'+chunkPart.toString(16).padStart(2,'0') : '—'}</code></td>
                <td><code>${isMatch ? 'MATCH' : ''}</code></td>
                <td><code>${combinedValue}</code></td>
            </tr>
        `;
    });
    showTable();
}

function handleChunkInput() {
    const val = chunkInput.value.trim();
    if (!val) {
        hideTable();
        document.getElementById("chunk-error").style.display = "none";
        return;
    }
    const num = parseInt(val, 16);
    if (isNaN(num)) {
        document.getElementById("chunk-error").style.display = "inline";
        return;
    }
    document.getElementById("chunk-error").style.display = "none";
    generateForward(num & 0xFF);
}

function handleCombinedInput() {
    const val = combinedInput.value.trim();
    if (!val) {
        hideTable();
        document.getElementById("combined-error").style.display = "none";
        return;
    }
    const num = parseInt(val, 16);
    if (isNaN(num)) {
        document.getElementById("combined-error").style.display = "inline";
        return;
    }
    document.getElementById("combined-error").style.display = "none";
    generateReverse(num);
}

chunkInput.addEventListener("input", handleChunkInput);
combinedInput.addEventListener("input", handleCombinedInput);
</script>

</body>
</html>
